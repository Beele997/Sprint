/***********************************************************************************************************************
 *   \date 	 : 06.02.2023          
 *   \name 	 : Ahmed Elebaby       
 *	 \version : 1.0              
 *	 \SWC     : CAN bus driver          
 *   \brief   : header file for CAN Bus driver
************************************************************************************************************************/
#ifndef __MCAL_CAN_H__
#define __MCAL_CAN_H__


/********************************************************************************************************************
 *    INCLUDES
 ********************************************************************************************************************/
 #include <stdint.h>
 

 
 
/********************************************************************************************************************
 *    LOCAL MACROS CONTANTS/FUNTIONS
 ********************************************************************************************************************/
 #define CAN_BAUD_RATE 500000
/********************************************************************************************************************
 *    LOCAL DATA & DATA STRUCTURE
 ********************************************************************************************************************/
/*Configured Comp use CAN Bus*/
typedef enum  
{
	
    DOOR_STATE,
    LIGHT_SWITCH_STATE,
    SPEED_STATE
	
}can_message_type;

typedef enum 
{
	
    CAN_OK,
    CAN_ERROR
	
} CanStatus_t;

typedef struct  
{
	can_message_type type;
    uint8_t data;
	uint8_t len;
	
}can_message;


/********************************************************************************************************************
 *    GLOBAL DATA
 ********************************************************************************************************************/

/********************************************************************************************************************
 *    LOCAL FUNCTION PROTOTYPES
 ********************************************************************************************************************/
 
/********************************************************************************************************************
 *    LOCAL FUNCTION
 ********************************************************************************************************************/
 
/********************************************************************************************************************
 *    GLOBAL FUNCTION
 ********************************************************************************************************************/
 /*Initialize the can*/
void can_init(void);

/*Control functions */
CanStatus_t Can_Transmit(can_message* pst_CAN_message);
CanStatus_t Can_Receive(can_message* pst_CAN_message);

/*Callack functions*/
void can_register_message_received_callback(void (*callback)(can_message *message));

#endif /*End of file Can bus*/